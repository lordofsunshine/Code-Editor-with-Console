## Code Editor — современный редактор кода с совместной работой

| Язык | Ссылка |
|---|---|
| Русский | Эта страница |
| English | [README.md](README.md) |

[![Node.js](https://img.shields.io/badge/Node.js-%E2%89%A518-brightgreen?logo=node.js)](https://nodejs.org)
[![Fastify](https://img.shields.io/badge/Backend-Fastify-007ec6?logo=fastify)](https://fastify.dev)
[![Socket.IO](https://img.shields.io/badge/Realtime-Socket.IO-black?logo=socketdotio)](https://socket.io)
[![Monaco Editor](https://img.shields.io/badge/Editor-Monaco-1f6feb)](https://microsoft.github.io/monaco-editor)
[![SQLite](https://img.shields.io/badge/DB-better--sqlite3-003b57?logo=sqlite)](https://www.npmjs.com/package/better-sqlite3)

Лёгкий веб‑редактор кода с совместным редактированием в реальном времени, управлением проектами/файлами и современным, аккуратным интерфейсом. Основан на Monaco (движок VS Code), Fastify и Socket.IO.

<img alt="Banner" src="https://i.postimg.cc/7L4GsLkh/image.png">

- **Совместная работа**: мгновенные изменения, позиции курсоров, присутствие участников и чат проекта.
- **Проекты и файлы**: создание, загрузка, удаление, структурирование ресурсов с поддержкой вложенных папок.
- **Чат проекта**: обмен сообщениями в реальном времени для участников с автоматической очисткой и историей.
- **Приглашения**: приглашайте коллег в проект (по умолчанию до 2 участников).
- **Живой предпросмотр**: HTML/CSS/JS, Markdown, SVG, изображения, аудио и видео — сразу в редакторе.
- **Современный UX**: тёмная/светлая темы, статус‑бар, вкладки, хоткеи, плавные анимации.
- **Защита**: сессии с httpOnly‑cookie, CSRF‑проверки, защитные заголовки, лимитирование запросов.

### Что нового?

Последние обновления и улучшения:

- **Безопасное хранилище**: Миграция на зашифрованную файловую систему с AES-256-GCM и автоматическим сжатием
- **Расширенные лимиты**: До 6 проектов, 32 файлов в проекте, 50MB файлы, 5MB аватары
- **Панель профиля**: Управление аватаром и именем пользователя из боковой панели
- **Сохранение сессии**: Имя пользователя запоминается на неделю
- **Блок "Что нового"**: Динамическая секция обновлений на экране приветствия
- **Локальное время в чате**: Сообщения отображают время пользователя
- **Анимации UI**: Плавные переходы для панели предпросмотра, модальных окон и кнопок
- **Обработка ошибок**: Улучшенное сжатие файлов с механизмами отката
- **Увеличенные лимиты**: 100 запросов за 15 минут

### Быстрый старт

- **Требования**: Node.js 18+

```bash
npm install
npm run start   # продовый режим
# или
npm run dev     # авто‑перезапуск в разработке
```

Откройте `http://localhost:3000`:
- Лендинг — `/`
- Аутентификация — `/auth`
- Редактор — `/editor` (требуется активная сессия)

### Как это устроено

- **Фронтенд**: Monaco Editor с раздельным видом и встроенной панелью предпросмотра. Рендер идёт в iframe через Blob‑URL; HTML автоматически дополняется in‑memory CSS/JS для мгновенного отклика.
- **Коллаборация**: комнаты Socket.IO на проект. События: изменение файлов, создание/удаление, позиции курсора, список участников.
- **Бэкенд**: Fastify раздаёт статику и REST‑API (`/api/auth`, `/api/projects`, `/api/files`, `/api/invitations`, `/api/warnings`). Для изменяющих запросов включены сессии и CSRF‑проверки.
- **Хранилище**: `better-sqlite3` — встроенная БД; фоновые задания очищают устаревшие данные.

### Конфигурация

- Порт по умолчанию: `3000`.
- `SESSION_SECRET` (необязательно): свой секрет для подписи сессий.
- Для локальной разработки дополнительных настроек не требуется.

### Безопасность и сообщение об уязвимостях

Если вы обнаружили уязвимость, **не молчите — пожалуйста, пишите!**
- Создайте issue в репозитории с пометкой «security», или
- Свяжитесь с мейнтейнерами приватно, если детальные сведения чувствительны.

Мы ценим ответственное раскрытие и оперативно реагируем.

— Удачной работы!

